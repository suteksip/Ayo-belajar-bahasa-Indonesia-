<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayo Belajar Bahasa Indonesia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'times': ['Times New Roman', 'serif'],
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background-color: #e5e7eb;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #4f46e5;
            transition: width 0.5s ease-in-out;
        }
        
        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .module-active {
            background-color: #f3f4f6;
            border-left: 4px solid #4f46e5;
        }
    </style>
</head>
<body class="bg-gray-50 font-times">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100">
        <div class="bg-white p-8 rounded-xl shadow-lg max-w-md w-full mx-4 fade-in">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-book text-white text-3xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-900">Ayo Belajar Bahasa Indonesia</h1>
                <p class="text-gray-600 mt-2">Silakan masuk atau daftar untuk melanjutkan</p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" name="email" required autocomplete="email"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <button type="submit" class="w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition duration-300 transform hover:-translate-y-0.5 shadow-md">
                    Masuk
                </button>
            </form>
            
            <div class="relative my-6">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">atau masuk dengan</span>
                </div>
            </div>
            
            <div id="g_id_signin" class="w-full flex justify-center mb-6"></div>
            
            <div class="mt-4 text-center text-sm text-gray-600">
                <p>Belum punya akun? 
                    <button onclick="showRegisterForm()" class="font-medium text-indigo-600 hover:text-indigo-800 transition">
                        Daftar disini
                    </button>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Content (Hidden until login) -->
    <div id="mainContent" class="hidden min-h-screen flex flex-col">
        <!-- Navigation -->
        <nav class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between h-16">
                    <div class="flex">
                        <div class="flex-shrink-0 flex items-center">
                            <a href="#" onclick="showPage('berandaPage')" class="flex items-center">
                                <i class="fas fa-book text-indigo-600 text-2xl mr-2"></i>
                                <span class="text-xl font-bold text-gray-900">Ayo Belajar Bahasa Indonesia</span>
                            </a>
                        </div>
                        <div class="hidden sm:ml-6 sm:flex sm:space-x-2">
                            <a href="#" onclick="showPage('berandaPage')" id="navBeranda" class="nav-link active">
                                Beranda
                            </a>
                            <a href="#" onclick="showPage('materiPage')" id="navMateri" class="nav-link">
                                Materi
                            </a>
                            <a href="#" onclick="showPage('kamusPage')" id="navKamus" class="nav-link">
                                Kamus
                            </a>
                            <a href="#" onclick="showPage('latihanPage')" id="navLatihan" class="nav-link">
                                Latihan
                            </a>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <div class="flex items-center space-x-4">
                            <div class="relative group">
                                <img id="userAvatar" class="h-8 w-8 rounded-full cursor-pointer" src="" alt="User avatar">
                                <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-10">
                                    <div class="px-4 py-2 border-b">
                                        <p id="userName" class="text-sm font-medium text-gray-900 truncate"></p>
                                        <p id="userEmail" class="text-xs text-gray-500 truncate"></p>
                                    </div>
                                    <a href="#" onclick="showPage('profilePage')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profil</a>
                                    <button onclick="handleSignOut()" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Keluar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-grow max-w-7xl mx-auto w-full py-6 px-4 sm:px-6 lg:px-8">
            <!-- Beranda Page -->
            <div id="berandaPage" class="page">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">Perkembangan Pembelajaran</h2>
                        <div class="text-sm text-indigo-600 font-medium">
                            <span id="lastActiveDate"></span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-700 mb-1">Materi Selesai</h3>
                                    <p id="completedLessons" class="text-3xl font-bold text-gray-900">0/10</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center">
                                    <i class="fas fa-check-circle text-indigo-600 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="text-sm text-gray-600 mb-1">Progress</div>
                                <div class="progress-bar">
                                    <div id="lessonsProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-teal-50 p-5 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-700 mb-1">Nilai Rata-rata</h3>
                                    <p id="averageScore" class="text-3xl font-bold text-gray-900">0%</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center">
                                    <i class="fas fa-chart-line text-teal-600 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="text-sm text-gray-600 mb-1">Target: 80%</div>
                                <div class="progress-bar">
                                    <div id="scoreProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-amber-50 to-orange-50 p-5 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-700 mb-1">Waktu Belajar</h3>
                                    <p id="studyTime" class="text-3xl font-bold text-gray-900">0 jam</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center">
                                    <i class="fas fa-clock text-amber-600 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="text-sm text-gray-600 mb-1">Rekomendasi: 2 jam/hari</div>
                                <div class="progress-bar">
                                    <div id="timeProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-indigo-50 rounded-xl p-5 mb-8">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center">
                                    <i class="fas fa-lightbulb text-indigo-600 text-xl"></i>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900 mb-1">Tips Hari Ini</h3>
                                <p class="text-gray-600">Untuk meningkatkan pemahaman teks berita, coba identifikasi 5W+1H (What, Who, Where, When, Why, How) dalam setiap berita yang Anda baca.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-md p-6 fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-gray-900">Materi Terbaru</h2>
                            <a href="#" onclick="showPage('materiPage')" class="text-sm text-indigo-600 hover:text-indigo-800 font-medium">Lihat Semua</a>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="lesson-card border border-gray-200 rounded-lg p-4 transition-all duration-300">
                                <div class="flex items-start">
                                    <div class="mr-4">
                                        <div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center">
                                            <i class="fas fa-newspaper text-indigo-600"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900 mb-1">Teks Berita</h3>
                                        <p class="text-gray-600 text-sm mb-3">Pelajari cara menganalisis dan membedakan berita asli dari hoaks</p>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <i class="far fa-clock mr-1"></i>
                                            <span>30 menit</span>
                                            <i class="far fa-star ml-3 mr-1"></i>
                                            <span>Pemula</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="lesson-card border border-gray-200 rounded-lg p-4 transition-all duration-300">
                                <div class="flex items-start">
                                    <div class="mr-4">
                                        <div class="w-10 h-10 rounded-lg bg-teal-100 flex items-center justify-center">
                                            <i class="fas fa-comments text-teal-600"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900 mb-1">Teks Debat</h3>
                                        <p class="text-gray-600 text-sm mb-3">Pelajari cara menyusun dan menganalisis teks debat</p>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <i class="far fa-clock mr-1"></i>
                                            <span>45 menit</span>
                                            <i class="far fa-star ml-3 mr-1"></i>
                                            <span>Menengah</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="lesson-card border border-gray-200 rounded-lg p-4 transition-all duration-300">
                                <div class="flex items-start">
                                    <div class="mr-4">
                                        <div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center">
                                            <i class="fas fa-book-open text-amber-600"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900 mb-1">Teks Biografi</h3>
                                        <p class="text-gray-600 text-sm mb-3">Pelajari cara menyusun dan menganalisis teks biografi</p>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <i class="far fa-clock mr-1"></i>
                                            <span>40 menit</span>
                                            <i class="far fa-star ml-3 mr-1"></i>
                                            <span>Pemula</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-gray-900">Aktivitas Terkini</h2>
                            <a href="#" onclick="showPage('latihanPage')" class="text-sm text-indigo-600 hover:text-indigo-800 font-medium">Lihat Semua</a>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="border-l-4 border-indigo-500 pl-4 py-2">
                                <p class="text-gray-600 text-sm">Kamu baru saja menyelesaikan materi <span class="font-medium">Teks Berita</span></p>
                                <p class="text-xs text-gray-500 mt-1">Hari ini, 10:30</p>
                            </div>
                            
                            <div class="border-l-4 border-green-500 pl-4 py-2">
                                <p class="text-gray-600 text-sm">Kamu mendapatkan nilai 85 pada <span class="font-medium">Uji Kompetensi Teks Berita</span></p>
                                <p class="text-xs text-gray-500 mt-1">Kemarin, 15:45</p>
                            </div>
                            
                            <div class="border-l-4 border-amber-500 pl-4 py-2">
                                <p class="text-gray-600 text-sm">Kamu memulai materi baru: <span class="font-medium">Teks Biografi</span></p>
                                <p class="text-xs text-gray-500 mt-1">2 hari yang lalu</p>
                            </div>
                            
                            <div class="border-l-4 border-blue-500 pl-4 py-2">
                                <p class="text-gray-600 text-sm">Kamu menambahkan 3 kata baru ke <span class="font-medium">Kamus</span></p>
                                <p class="text-xs text-gray-500 mt-1">3 hari yang lalu</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Materi Page -->
            <div id="materiPage" class="page hidden">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 fade-in">
                    <h1 class="text-3xl font-bold text-gray-900 mb-6">Materi Pembelajaran</h1>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="lesson-card border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all duration-300">
                            <div class="flex items-start mb-4">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center">
                                        <i class="fas fa-newspaper text-indigo-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Teks Berita</h3>
                                    <div class="flex items-center text-sm text-gray-500 mb-3">
                                        <i class="far fa-clock mr-1"></i>
                                        <span>30 menit</span>
                                        <i class="far fa-star ml-3 mr-1"></i>
                                        <span>Pemula</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Pelajari cara menganalisis dan membedakan berita asli dari hoaks. Modul ini mencakup struktur teks berita, identifikasi fakta dan opini, serta teknik verifikasi informasi.</p>
                            <a href="#" onclick="startLesson('news')" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition">
                                Mulai Belajar
                            </a>
                        </div>
                        
                        <div class="lesson-card border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all duration-300">
                            <div class="flex items-start mb-4">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-teal-100 flex items-center justify-center">
                                        <i class="fas fa-comments text-teal-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Teks Debat</h3>
                                    <div class="flex items-center text-sm text-gray-500 mb-3">
                                        <i class="far fa-clock mr-1"></i>
                                        <span>45 menit</span>
                                        <i class="far fa-star ml-3 mr-1"></i>
                                        <span>Menengah</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Pelajari cara menyusun dan menganalisis teks debat. Modul ini mencakup struktur debat, teknik argumentasi, penyusunan mosi, serta strategi penyampaian pendapat yang efektif.</p>
                            <a href="#" onclick="startLesson('debate')" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition">
                                Mulai Belajar
                            </a>
                        </div>
                        
                        <div class="lesson-card border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all duration-300">
                            <div class="flex items-start mb-4">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center">
                                        <i class="fas fa-book-open text-amber-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Teks Biografi</h3>
                                    <div class="flex items-center text-sm text-gray-500 mb-3">
                                        <i class="far fa-clock mr-1"></i>
                                        <span>40 menit</span>
                                        <i class="far fa-star ml-3 mr-1"></i>
                                        <span>Pemula</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Pelajari cara menyusun dan menganalisis teks biografi. Modul ini mencakup struktur biografi, teknik pengumpulan data, penulisan narasi yang menarik, serta analisis nilai kehidupan tokoh.</p>
                            <a href="#" onclick="startLesson('biografi')" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition">
                                Mulai Belajar
                            </a>
                        </div>
                        
                        <div class="border border-gray-200 rounded-xl p-5 bg-gray-50">
                            <div class="flex items-start">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-gray-200 flex items-center justify-center">
                                        <i class="fas fa-plus text-gray-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Materi Selanjutnya</h3>
                                    <p class="text-gray-600">Kami sedang menyiapkan materi baru untuk memperkaya pembelajaran Anda. Materi akan segera hadir!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Kamus Page -->
            <div id="kamusPage" class="page hidden">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 fade-in">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">Kamus Besar Bahasa Indonesia</h1>
                    <p class="text-gray-600 mb-6">Cari arti kata dan tambahkan ke daftar favorit untuk pembelajaran lebih lanjut</p>
                    
                    <div class="max-w-2xl">
                        <div class="relative">
                            <input id="dictionaryInput" type="text" placeholder="Cari kata..." 
                                class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                            <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                                <i class="fas fa-search"></i>
                            </div>
                            <button onclick="searchDictionary()" class="absolute right-2 top-1/2 transform -translate-y-1/2 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-md transition">
                                Cari
                            </button>
                        </div>
                        
                        <div id="dictionaryResult" class="mt-6 bg-white border border-gray-200 rounded-xl p-5 min-h-[200px]">
                            <div class="flex flex-col items-center justify-center h-full text-gray-500 py-10">
                                <i class="fas fa-book-open text-4xl mb-4"></i>
                                <p>Cari kata untuk melihat definisinya</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">Kata yang Sering Dicari</h2>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="searchWord('analisis')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">analisis</button>
                            <button onclick="searchWord('argumen')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">argumen</button>
                            <button onclick="searchWord('biografi')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">biografi</button>
                            <button onclick="searchWord('debat')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">debat</button>
                            <button onclick="searchWord('fakta')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">fakta</button>
                            <button onclick="searchWord('hoaks')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">hoaks</button>
                            <button onclick="searchWord('narasi')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">narasi</button>
                            <button onclick="searchWord('opini')" class="px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm hover:bg-indigo-200 transition">opini</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Latihan Page -->
            <div id="latihanPage" class="page hidden">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 fade-in">
                    <h1 class="text-3xl font-bold text-gray-900 mb-6">Latihan Ujian Kompetensi</h1>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all duration-300">
                            <div class="flex items-start mb-4">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center">
                                        <i class="fas fa-newspaper text-indigo-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Uji Kompetensi Teks Berita</h3>
                                    <div class="flex items-center text-sm text-gray-500 mb-3">
                                        <i class="far fa-clock mr-1"></i>
                                        <span>20 menit</span>
                                        <i class="fas fa-question-circle ml-3 mr-1"></i>
                                        <span>15 Pertanyaan</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 mb-4">Latihan menganalisis teks berita dan mengidentifikasi hoaks. Uji pemahaman Anda tentang struktur berita, perbedaan fakta dan opini, serta teknik verifikasi informasi.</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-trophy text-amber-500 mr-2"></i>
                                    <span class="text-sm font-medium">Nilai Tertinggi: 85%</span>
                                </div>
                                <a href="#" onclick="startTest('news')" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition">
                                    Mulai Latihan
                                </a>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-xl p-5 bg-gray-50">
                            <div class="flex items-start">
                                <div class="mr-4">
                                    <div class="w-12 h-12 rounded-xl bg-gray-200 flex items-center justify-center">
                                        <i class="fas fa-plus text-gray-600 text-xl"></i>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-medium text-gray-900 mb-1">Latihan Selanjutnya</h3>
                                    <p class="text-gray-600">Kami sedang menyiapkan lebih banyak latihan untuk meningkatkan kemampuan Anda. Latihan akan segera hadir!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 bg-blue-50 rounded-xl p-5">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">Tips Mengerjakan Latihan</h2>
                        <ul class="list-disc pl-5 space-y-2 text-gray-700">
                            <li>Baca setiap pertanyaan dengan seksama sebelum menjawab</li>
                            <li>Kelola waktu dengan baik, jangan terlalu lama pada satu pertanyaan</li>
                            <li>Tinjau jawaban Anda sebelum menyelesaikan latihan</li>
                            <li>Analisis jawaban yang salah untuk memahami kesalahan</li>
                            <li>Ulangi materi yang belum dikuasai dengan baik</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Profile Page -->
            <div id="profilePage" class="page hidden">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 fade-in">
                    <h1 class="text-3xl font-bold text-gray-900 mb-6">Profil Pengguna</h1>
                    
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="md:w-1/3">
                            <div class="bg-gray-50 rounded-xl p-6">
                                <div class="flex flex-col items-center">
                                    <img id="profileAvatar" class="w-24 h-24 rounded-full mb-4" src="" alt="Profile avatar">
                                    <h2 id="profileName" class="text-xl font-bold text-gray-900 mb-1"></h2>
                                    <p id="profileEmail" class="text-gray-600 mb-4"></p>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mb-6">
                                        <div id="profileLevel" class="bg-indigo-600 h-1.5 rounded-full" style="width: 45%"></div>
                                    </div>
                                    <div class="text-center mb-2">
                                        <span class="text-sm font-medium text-gray-700">Level Pembelajar</span>
                                        <p class="text-lg font-bold text-indigo-600">Menengah</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:w-2/3">
                            <div class="mb-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">Informasi Akun</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>
                                        <input id="profileNameInput" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                        <input id="profileEmailInput" type="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Bergabung Sejak</label>
                                        <input id="joinDate" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100" disabled>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Terakhir Aktif</label>
                                        <input id="lastActive" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100" disabled>
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <button onclick="updateProfile()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition">
                                        Perbarui Profil
                                    </button>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">Pengaturan Keamanan</h3>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Ubah Password</h4>
                                            <p class="text-sm text-gray-600">Perbarui password akun Anda</p>
                                        </div>
                                        <button onclick="showChangePassword()" class="px-4 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                                            Ubah
                                        </button>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Sesi Aktif</h4>
                                            <p class="text-sm text-gray-600">Kelola perangkat yang terhubung</p>
                                        </div>
                                        <button class="px-4 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                                            Kelola
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <h3 class="text-lg font-bold mb-4">Ayo Belajar Bahasa Indonesia</h3>
                        <p class="text-gray-400 text-sm">Platform pembelajaran bahasa Indonesia interaktif untuk meningkatkan kemampuan berbahasa dan analisis teks.</p>
                    </div>
                    <div>
                        <h4 class="text-md font-semibold mb-4">Navigasi</h4>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li><a href="#" onclick="showPage('berandaPage')" class="hover:text-white transition">Beranda</a></li>
                            <li><a href="#" onclick="showPage('materiPage')" class="hover:text-white transition">Materi Pembelajaran</a></li>
                            <li><a href="#" onclick="showPage('kamusPage')" class="hover:text-white transition">Kamus</a></li>
                            <li><a href="#" onclick="showPage('latihanPage')" class="hover:text-white transition">Latihan</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-md font-semibold mb-4">Bantuan</h4>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li><a href="#" class="hover:text-white transition">Pusat Bantuan</a></li>
                            <li><a href="#" class="hover:text-white transition">FAQ</a></li>
                            <li><a href="#" class="hover:text-white transition">Kebijakan Privasi</a></li>
                            <li><a href="#" class="hover:text-white transition">Syarat & Ketentuan</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-md font-semibold mb-4">Kontak</h4>
                        <ul class="space-y-2 text-sm text-gray-400">
                            <li class="flex items-center"><i class="fas fa-envelope mr-2"></i> support@ayobelajar.id</li>
                            <li class="flex items-center"><i class="fab fa-instagram mr-2"></i> @ayobelajar_id</li>
                            <li class="flex items-center"><i class="fab fa-facebook mr-2"></i> Ayo Belajar Bahasa Indonesia</li>
                            <li class="flex items-center"><i class="fab fa-youtube mr-2"></i> Ayo Belajar Indonesia</li>
                        </ul>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-400">
                    <p>Â© 2023 Ayo Belajar Bahasa Indonesia. Hak Cipta Dilindungi.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Lesson Modal -->
    <div id="lessonModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden">
            <div class="flex">
                <!-- Sidebar -->
                <div class="w-1/4 bg-gray-50 border-r border-gray-200 flex flex-col">
                    <div class="p-4 border-b border-gray-200">
                        <h3 id="lessonTitle" class="text-lg font-bold text-gray-900"></h3>
                    </div>
                    <div id="lessonModules" class="overflow-y-auto flex-grow">
                        <!-- Modules will be populated here -->
                    </div>
                    <div class="p-4 border-t border-gray-200">
                        <button onclick="closeLesson()" class="w-full py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition">
                            Keluar
                        </button>
                    </div>
                </div>
                
                <!-- Content -->
                <div class="w-3/4 flex flex-col">
                    <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                        <h3 id="moduleTitle" class="text-xl font-bold text-gray-900"></h3>
                        <div>
                            <button id="prevModule" class="px-3 py-1 mr-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition"><i class="fas fa-arrow-left"></i></button>
                            <button id="nextModule" class="px-3 py-1 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition"><i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>
                    <div id="lessonContent" class="p-6 overflow-y-auto flex-grow">
                        <!-- Lesson content will be populated here -->
                    </div>
                    <div class="p-4 border-t border-gray-200 flex justify-between items-center">
                        <div class="text-sm text-gray-500">
                            <span id="currentModule">1</span> dari <span id="totalModules">5</span> modul
                        </div>
                        <button id="completeModule" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition">
                            Tandai Selesai
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const mainContent = document.getElementById('mainContent');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userEmail = document.getElementById('userEmail');
        const dictionaryInput = document.getElementById('dictionaryInput');
        const dictionaryResult = document.getElementById('dictionaryResult');
        const loginForm = document.getElementById('loginForm');
        const lessonModal = document.getElementById('lessonModal');

        // User state
        let userProfile = null;
        let currentLesson = null;
        let currentModule = 0;

        // Google Client ID
        const googleClientId = '639078981362-kjo7me0u11aiokta3av0c0varjv691p8.apps.googleusercontent.com';

        // Initialize Google Sign In
        window.onload = function() {
            if (typeof google !== 'undefined') {
                google.accounts.id.initialize({
                    client_id: googleClientId,
                    callback: handleCredentialResponse
                });
                google.accounts.id.renderButton(
                    document.getElementById("g_id_signin"),
                    { theme: "outline", size: "large" }
                );
            }
            
            // Set up form submit handler
            loginForm.onsubmit = handleLogin;
            
            // Check for existing session
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                userProfile = JSON.parse(savedUser);
                loginScreen.classList.add('hidden');
                mainContent.classList.remove('hidden');
                updateUserProfile();
                
                // Set last active date
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('lastActiveDate').textContent = 'Terakhir aktif: ' + now.toLocaleDateString('id-ID', options);
            }
        };

        // Handle Google Sign-In
        function handleCredentialResponse(response) {
            const responsePayload = jwt_decode(response.credential);
            const userProfile = {
                name: responsePayload.name,
                email: responsePayload.email,
                picture: responsePayload.picture,
                joinDate: new Date().toISOString()
            };

            // Save user and show main content
            localStorage.setItem('currentUser', JSON.stringify(userProfile));
            loginScreen.classList.add('hidden');
            mainContent.classList.remove('hidden');
            updateUserProfile();
        }

        // Update user profile in UI
        function updateUserProfile() {
            userAvatar.src = userProfile.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(userProfile.name);
            profileAvatar.src = userProfile.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(userProfile.name);
            userName.textContent = userProfile.name;
            userEmail.textContent = userProfile.email;
            profileName.textContent = userProfile.name;
            profileEmail.textContent = userProfile.email;
            profileNameInput.value = userProfile.name;
            profileEmailInput.value = userProfile.email;
            
            if (userProfile.joinDate) {
                const joinDate = new Date(userProfile.joinDate);
                document.getElementById('joinDate').value = joinDate.toLocaleDateString('id-ID');
                document.getElementById('lastActive').value = new Date().toLocaleDateString('id-ID');
            }
        }

        // Show registration form
        function showRegisterForm() {
            loginForm.innerHTML = `
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>
                    <input type="text" id="name" name="name" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" name="email" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" name="password" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div>
                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Konfirmasi Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <button type="submit" class="w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition duration-300 transform hover:-translate-y-0.5 shadow-md">
                    Daftar
                </button>
            `;
            
            const registerText = document.querySelector('.mt-4.text-center p');
            registerText.innerHTML = `Sudah punya akun? <button onclick="showLoginForm()" class="font-medium text-indigo-600 hover:text-indigo-800 transition">Masuk disini</button>`;
            
            loginForm.onsubmit = handleRegister;
        }

        // Show login form
        function showLoginForm() {
            loginForm.innerHTML = `
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" name="email" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" name="password" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <button type="submit" class="w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition duration-300 transform hover:-translate-y-0.5 shadow-md">
                    Masuk
                </button>
            `;
            
            const registerText = document.querySelector('.mt-4.text-center p');
            registerText.innerHTML = `Belum punya akun? <button onclick="showRegisterForm()" class="font-medium text-indigo-600 hover:text-indigo-800 transition">Daftar disini</button>`;
            
            loginForm.onsubmit = handleLogin;
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Get stored users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                userProfile = user;
                userProfile.joinDate = userProfile.joinDate || new Date().toISOString();
                localStorage.setItem('currentUser', JSON.stringify(userProfile));
                loginScreen.classList.add('hidden');
                mainContent.classList.remove('hidden');
                userAvatar.src = userProfile.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(userProfile.name);
                updateUserProfile();
                
                // Set last active date
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('lastActiveDate').textContent = 'Terakhir aktif: ' + now.toLocaleDateString('id-ID', options);
            } else {
                alert('Email atau password salah');
            }
        }

        // Handle registration
        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('Password tidak cocok');
                return;
            }
            
            // Get stored users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            // Check if email already exists
            if (users.some(u => u.email === email)) {
                alert('Email sudah terdaftar');
                return;
            }
            
            // Add new user
            const newUser = { 
                name, 
                email, 
                password,
                joinDate: new Date().toISOString()
            };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Auto login after registration
            userProfile = newUser;
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            loginScreen.classList.add('hidden');
            mainContent.classList.remove('hidden');
            userAvatar.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent(name);
            updateUserProfile();
        }

        // Handle sign out
        function handleSignOut() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('learningProgress');
            userProfile = null;
            mainContent.classList.add('hidden');
            loginScreen.classList.remove('hidden');
            showLoginForm(); // Reset to login form
        }

        // Show page function for SPA navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.remove('hidden');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('border-b-2', 'border-indigo-600', 'text-gray-900');
                link.classList.add('text-gray-500', 'hover:text-gray-900');
            });
            
            const activeLink = document.getElementById('nav' + pageId.charAt(0).toUpperCase() + pageId.slice(1).replace('Page', ''));
            if (activeLink) {
                activeLink.classList.add('border-b-2', 'border-indigo-600', 'text-gray-900');
                activeLink.classList.remove('text-gray-500', 'hover:text-gray-900');
            }
        }

        // Dictionary search function
        async function searchDictionary() {
            const word = dictionaryInput.value.trim();
            if (!word) return;

            dictionaryResult.innerHTML = `
                <div class="flex items-center justify-center py-8">
                    <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600 mr-3"></div>
                    <span>Mencari kata...</span>
                </div>
            `;
            
            // Simulate API call delay
            setTimeout(() => {
                // Mock data for dictionary
                const dictionaryData = {
                    'analisis': 'Pemeriksaan terhadap suatu peristiwa (karangan, perbuatan, dsb) untuk mengetahui keadaan yang sebenarnya (sebab-musabab, duduk perkaranya, dsb)',
                    'argumen': 'Alasan yang dapat dipakai untuk memperkuat atau menolak suatu pendapat, pendirian, atau gagasan',
                    'biografi': 'Riwayat hidup seseorang yang ditulis oleh orang lain',
                    'debat': 'Pertukaran pendapat mengenai suatu masalah dengan saling memberi alasan untuk mempertahankan pendapat masing-masing',
                    'fakta': 'Hal (keadaan, peristiwa) yang merupakan kenyataan; sesuatu yang benar-benar ada atau terjadi',
                    'hoaks': 'Berita bohong; informasi yang sesungguhnya tidak benar, tetapi dibuat seolah-olah benar adanya',
                    'narasi': 'Pengisahan suatu cerita atau kejadian; cerita atau deskripsi suatu kejadian atau peristiwa',
                    'opini': 'Pendapat; pikiran; pendirian'
                };
                
                const definition = dictionaryData[word.toLowerCase()] || 'Definisi tidak ditemukan untuk kata tersebut.';
                
                dictionaryResult.innerHTML = `
                    <div class="bg-white border border-gray-200 rounded-xl p-5">
                        <div class="flex justify-between items-start">
                            <h3 class="text-xl font-bold text-gray-900 capitalize">${word}</h3>
                            <button class="text-indigo-600 hover:text-indigo-800">
                                <i class="far fa-bookmark"></i>
                            </button>
                        </div>
                        <div class="mt-4">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">Definisi:</h4>
                            <p class="text-gray-800">${definition}</p>
                        </div>
                        <div class="mt-6">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">Contoh Penggunaan:</h4>
                            <p class="text-gray-600 italic">"Dalam teks berita tersebut, penulis menyajikan <span class="font-medium">${word}</span> dengan jelas sehingga pembaca dapat memahami inti permasalahan."</p>
                        </div>
                    </div>
                `;
            }, 800);
        }

        // Search word from button
        function searchWord(word) {
            dictionaryInput.value = word;
            searchDictionary();
        }

        // Start lesson
        function startLesson(lessonId) {
            currentLesson = lessonId;
            currentModule = 0;
            
            // Set lesson title
            document.getElementById('lessonTitle').textContent = 
                lessonId === 'news' ? 'Teks Berita' : 
                lessonId === 'debate' ? 'Teks Debat' : 
                'Teks Biografi';
            
            // Generate modules
            const modulesContainer = document.getElementById('lessonModules');
            modulesContainer.innerHTML = '';
            
            const modules = [
                { title: 'Pengantar', icon: 'fas fa-play-circle' },
                { title: 'Konsep Dasar', icon: 'fas fa-book' },
                { title: 'Struktur', icon: 'fas fa-layer-group' },
                { title: 'Analisis Teks', icon: 'fas fa-search' },
                { title: 'Latihan', icon: 'fas fa-pencil-alt' }
            ];
            
            modules.forEach((module, index) => {
                const moduleElement = document.createElement('div');
                moduleElement.className = `p-3 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition ${index === 0 ? 'module-active' : ''}`;
                moduleElement.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center mr-3">
                            <i class="${module.icon} text-indigo-600"></i>
                        </div>
                        <span>${module.title}</span>
                    </div>
                `;
                moduleElement.addEventListener('click', () => showModule(index));
                modulesContainer.appendChild(moduleElement);
            });
            
            // Show first module
            showModule(0);
            
            // Show modal
            lessonModal.classList.remove('hidden');
        }

        // Show module content
        function showModule(moduleIndex) {
            currentModule = moduleIndex;
            
            // Update active module in sidebar
            document.querySelectorAll('#lessonModules > div').forEach((module, index) => {
                if (index === moduleIndex) {
                    module.classList.add('module-active');
                } else {
                    module.classList.remove('module-active');
                }
            });
            
            // Set module title
            document.getElementById('moduleTitle').textContent = 
                moduleIndex === 0 ? 'Pengantar' : 
                moduleIndex === 1 ? 'Konsep Dasar' : 
                moduleIndex === 2 ? 'Struktur' : 
                moduleIndex === 3 ? 'Analisis Teks' : 
                'Latihan';
            
            // Set module counters
            document.getElementById('currentModule').textContent = moduleIndex + 1;
            document.getElementById('totalModules').textContent = 5;
            
            // Set navigation buttons
            document.getElementById('prevModule').disabled = moduleIndex === 0;
            document.getElementById('nextModule').disabled = moduleIndex === 4;
            
            // Generate content based on lesson and module
            const contentContainer = document.getElementById('lessonContent');
            let content = '';
            
            if (currentLesson === 'news') {
                switch(moduleIndex) {
                    case 0:
                        content = `
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Pengantar Teks Berita</h3>
                            <p class="text-gray-700 mb-4">Teks berita adalah bentuk tulisan yang menyampaikan informasi tentang peristiwa terkini yang dianggap penting bagi khalayak. Dalam modul ini, Anda akan mempelajari cara menganalisis dan membedakan berita asli dari hoaks.</p>
                            <div class="bg-blue-50 p-4 rounded-lg mb-4">
                                <h4 class="font-semibold text-blue-800 mb-2">Tujuan Pembelajaran:</h4>
                                <ul class="list-disc pl-5 text-blue-700">
                                    <li>Memahami struktur teks berita</li>
                                    <li>Mengidentifikasi unsur 5W+1H dalam berita</li>
                                    <li>Membedakan fakta dan opini dalam berita</li>
                                    <li>Mengenali ciri-ciri berita hoaks</li>
                                </ul>
                            </div>
                            <div class="flex justify-center my-6">
                                <div class="w-32 h-32 bg-gray-200 border-2 border-dashed rounded-xl flex items-center justify-center text-gray-500">
                                    <i class="fas fa-image text-3xl"></i>
                                </div>
                            </div>
                            <p class="text-gray-600 text-sm italic">"Berita yang baik adalah berita yang informatif, akurat, dan seimbang."</p>
                        `;
                        break;
                    case 1:
                        content = `
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Konsep Dasar Teks Berita</h3>
                            <p class="text-gray-700 mb-4">Setiap teks berita memiliki elemen-elemen dasar yang membentuk struktur dan isinya. Memahami konsep dasar ini akan membantu Anda dalam menganalisis berita dengan lebih baik.</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div class="bg-white border border-gray-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">Unsur 5W+1H</h4>
                                    <ul class="list-disc pl-5 text-gray-700">
                                        <li><span class="font-medium">What</span> (Apa) - Peristiwa apa yang terjadi?</li>
                                        <li><span class="font-medium">Who</span> (Siapa) - Siapa yang terlibat?</li>
                                        <li><span class="font-medium">Where</span> (Di mana) - Di mana peristiwa terjadi?</li>
                                        <li><span class="font-medium">When</span> (Kapan) - Kapan peristiwa terjadi?</li>
                                        <li><span class="font-medium">Why</span> (Mengapa) - Mengapa peristiwa terjadi?</li>
                                        <li><span class="font-medium">How</span> (Bagaimana) - Bagaimana peristiwa terjadi?</li>
                                    </ul>
                                </div>
                                
                                <div class="bg-white border border-gray-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">Fakta vs Opini</h4>
                                    <p class="text-gray-700 mb-2">Fakta adalah pernyataan yang dapat dibuktikan kebenarannya, sedangkan opini adalah pendapat pribadi yang subjektif.</p>
                                    <div class="bg-yellow-50 p-3 rounded-lg">
                                        <p class="text-sm"><span class="font-medium">Contoh Fakta:</span> "Presiden akan melakukan kunjungan kerja ke Jawa Barat besok."</p>
                                        <p class="text-sm mt-2"><span class="font-medium">Contoh Opini:</span> "Kunjungan kerja presiden dinilai tidak efektif oleh beberapa pengamat."</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-green-800 mb-2">Tips Identifikasi Hoaks:</h4>
                                <ul class="list-disc pl-5 text-green-700">
                                    <li>Periksa sumber berita dan reputasi media</li>
                                    <li>Cari versi berita dari media lain untuk konfirmasi</li>
                                    <li>Perhatikan judul yang sensasional atau provokatif</li>
                                    <li>Periksa tanggal dan waktu kejadian</li>
                                    <li>Gunakan situs verifikasi fakta seperti TurnBackHoax atau CekFakta</li>
                                </ul>
                            </div>
                        `;
                        break;
                    // Other module cases would go here...
                }
            } else if (currentLesson === 'debate') {
                // Content for debate lesson
            } else {
                // Content for biography lesson
            }
            
            contentContainer.innerHTML = content;
        }

        // Close lesson modal
        function closeLesson() {
            lessonModal.classList.add('hidden');
        }

        // Start test
        function startTest(testId) {
            alert(`Memulai ujian kompetensi untuk ${testId}`);
            // In a real application, this would open the test interface
        }

        // Update profile
        function updateProfile() {
            const newName = document.getElementById('profileNameInput').value;
            if (newName && newName !== userProfile.name) {
                userProfile.name = newName;
                localStorage.setItem('currentUser', JSON.stringify(userProfile));
                updateUserProfile();
                alert('Profil berhasil diperbarui!');
            }
        }

        // Show change password form
        function showChangePassword() {
            alert('Fitur perubahan password akan segera tersedia!');
        }

        // Progress tracking
        const progress = {
            completedLessons: 0,
            averageScore: 0,
            studyTime: 0
        };

        function updateProgress(lessonId, score, timeSpent) {
            progress.completedLessons++;
            progress.averageScore = ((progress.averageScore * (progress.completedLessons - 1)) + score) / progress.completedLessons;
            progress.studyTime += timeSpent;
            
            // Update progress display
            document.getElementById('completedLessons').textContent = `${progress.completedLessons}/10`;
            document.getElementById('averageScore').textContent = `${Math.round(progress.averageScore)}%`;
            document.getElementById('studyTime').textContent = `${Math.round(progress.studyTime)} jam`;
            
            // Update progress bars
            document.getElementById('lessonsProgress').style.width = `${progress.completedLessons * 10}%`;
            document.getElementById('scoreProgress').style.width = `${Math.min(progress.averageScore, 100)}%`;
            document.getElementById('timeProgress').style.width = `${Math.min(progress.studyTime / 20 * 100, 100)}%`;
            
            // Store progress
            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        // Load saved progress
        const savedProgress = localStorage.getItem('learningProgress');
        if (savedProgress) {
            Object.assign(progress, JSON.parse(savedProgress));
            updateProgress(null, 0, 0); // Update display without changing values
        } else {
            // Initialize with some progress for demo
            progress.completedLessons = 2;
            progress.averageScore = 75;
            progress.studyTime = 3.5;
            updateProgress(null, 0, 0);
        }
        
        // Set up navigation buttons
        document.getElementById('prevModule').addEventListener('click', () => {
            if (currentModule > 0) showModule(currentModule - 1);
        });
        
        document.getElementById('nextModule').addEventListener('click', () => {
            if (currentModule < 4) showModule(currentModule + 1);
        });
        
        document.getElementById('completeModule').addEventListener('click', () => {
            alert(`Modul ${currentModule + 1} berhasil diselesaikan!`);
            if (currentModule === 4) {
                // If last module completed
                updateProgress(currentLesson, 85, 0.5);
                closeLesson();
            } else {
                showModule(currentModule + 1);
            }
        });
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</body>
</html>